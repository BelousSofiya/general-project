<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<munit:config name="test-salesforce-listener.xml" />
	<munit:test name="test-salesforce-listenerTest" doc:id="82979e7b-3695-4e22-9306-a7260cf04caa" >
		<munit:behavior >
			<munit-tools:spy doc:name="Spy" doc:id="52ec3ddc-dcbe-4762-a177-502b55537db3" processor="ee:transform">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ccab2ecf-4862-49f5-9a67-5f3c54a63ba9" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert-equals doc:name="Assert equals" doc:id="9c7dac5a-a31c-40b8-9105-56869f0239b2" actual="#[payload]" expected='#[%dw 2.0&#10;output application/json&#10;---&#10;{"CustomerSignedDate": null, &#10; "ActivatedById": null, &#10; "LastModifiedDate": "2024-07-17T16:48:03.000Z", &#10; "RocketName__c": "test_rocket_name", &#10; "ContractNumber": "00000190", &#10; "AccountId": "001Qy00000OJydlIAD", &#10; "Description": null, &#10; "BillingCity": null, &#10; "CustomerSignedId": null, &#10; "LastReferencedDate": "2024-07-17T16:48:03.000Z", &#10; "BillingLatitude": null,&#10; "ContractTerm": 1,&#10; "type": "Contract", &#10; "CompanySignedId": null, &#10; "StatusCode": "Draft", &#10; "SuccessStatus__c": 1, &#10; "StartDate": "2024-07-17", &#10; "BillingAddress": null, &#10; "OwnerId": "005Qy000005y97BIAQ", &#10; "CreatedById": "005Qy000005y97BIAQ", &#10; "BillingLongitude": null, &#10; "BillingGeocodeAccuracy": null, &#10; "BillingPostalCode": null, &#10; "CustomerSignedTitle": null, &#10; "ActivatedDate": null, &#10; "Status": "Draft", &#10; "DateCreation__c": "2024-07-17", &#10; "IsDeleted": false, &#10; "SpecialTerms": null, &#10; "LastViewedDate": "2024-07-17T16:48:03.000Z", &#10; "LastApprovedDate": null, &#10; "EndDate": "2024-08-16", &#10; "SystemModstamp": "2024-07-17T16:48:03.000Z", &#10; "BillingCountry": null, &#10; "BillingStreet": null, &#10; "CreatedDate": "2024-07-17T09:54:15.000Z", &#10; "LastActivityDate": null, &#10; "Pricebook2Id": null, &#10; "CompanySignedDate": null, &#10; "OwnerExpirationNotice": null, &#10; "ExternalId__c": "test_Bilous", &#10; "Details__c": "test_details", &#10; "Id": "800Qy00000GS9TqIAL", &#10; "LastModifiedById": "005Qy000005y97BIAQ", &#10; "BillingState": null, &#10; "NameSalesforce__c": "test_name"&#10;}]'/>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert-equals doc:name="Assert equals" doc:id="142230d4-80d1-4a95-aa69-bfcea7d5f14b" actual="#[vars.LaunchFieldsData]" expected='#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;externalId: "test_Bilous",&#10;success: 1,&#10;details: "test_details",&#10;launchName: "test_name",&#10;date: "2024-07-17",&#10;rocketName: "test_rocket_name"&#10;}]'/>
				</munit-tools:after-call>
			</munit-tools:spy>
			<!-- [STUDIO:"Mock when"]<munit-tools:mock-when doc:name="Mock when" doc:id="7ee197ed-744c-47cc-aed8-a9547336b7ea" /> [STUDIO] -->
		</munit:behavior>
		<munit:execution >
			<!-- [STUDIO:"Transform Message"]<ee:transform doc:name="Transform Message" doc:id="b9a3c000-4859-47d1-961e-04ab364d4571" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
&#45;&#45;-
{"CustomerSignedDate": null, 
 "ActivatedById": null, 
 "LastModifiedDate": "2024-07-17T16:48:03.000Z", 
 "RocketName__c": "test_rocket_name", 
 "ContractNumber": "00000190", 
 "AccountId": "001Qy00000OJydlIAD", 
 "Description": null, 
 "BillingCity": null, 
 "CustomerSignedId": null, 
 "LastReferencedDate": "2024-07-17T16:48:03.000Z", 
 "BillingLatitude": null,
 "ContractTerm": 1,
 "type": "Contract", 
 "CompanySignedId": null, 
 "StatusCode": "Draft", 
 "SuccessStatus__c": 1, 
 "StartDate": "2024-07-17", 
 "BillingAddress": null, 
 "OwnerId": "005Qy000005y97BIAQ", 
 "CreatedById": "005Qy000005y97BIAQ", 
 "BillingLongitude": null, 
 "BillingGeocodeAccuracy": null, 
 "BillingPostalCode": null, 
 "CustomerSignedTitle": null, 
 "ActivatedDate": null, 
 "Status": "Draft", 
 "DateCreation__c": "2024-07-17", 
 "IsDeleted": false, 
 "SpecialTerms": null, 
 "LastViewedDate": "2024-07-17T16:48:03.000Z", 
 "LastApprovedDate": null, 
 "EndDate": "2024-08-16", 
 "SystemModstamp": "2024-07-17T16:48:03.000Z", 
 "BillingCountry": null, 
 "BillingStreet": null, 
 "CreatedDate": "2024-07-17T09:54:15.000Z", 
 "LastActivityDate": null, 
 "Pricebook2Id": null, 
 "CompanySignedDate": null, 
 "OwnerExpirationNotice": null, 
 "ExternalId__c": "test_Bilous", 
 "Details__c": "test_details", 
 "Id": "800Qy00000GS9TqIAL", 
 "LastModifiedById": "005Qy000005y97BIAQ", 
 "BillingState": null, 
 "NameSalesforce__c": "test_name"
}&#93;&#93;></ee:set-payload>
				</ee:message>
			</ee:transform> [STUDIO] -->
			<munit:set-event doc:name="Set Event" doc:id="30717a76-105a-4389-b6b2-08bd2758a91b" >
				<munit:payload value='#[%dw 2.0&#10;output application/json&#10;---&#10;{"CustomerSignedDate": null, &#10; "ActivatedById": null, &#10; "LastModifiedDate": "2024-07-17T16:48:03.000Z", &#10; "RocketName__c": "test_rocket_name", &#10; "ContractNumber": "00000190", &#10; "AccountId": "001Qy00000OJydlIAD", &#10; "Description": null, &#10; "BillingCity": null, &#10; "CustomerSignedId": null, &#10; "LastReferencedDate": "2024-07-17T16:48:03.000Z", &#10; "BillingLatitude": null,&#10; "ContractTerm": 1,&#10; "type": "Contract", &#10; "CompanySignedId": null, &#10; "StatusCode": "Draft", &#10; "SuccessStatus__c": 1, &#10; "StartDate": "2024-07-17", &#10; "BillingAddress": null, &#10; "OwnerId": "005Qy000005y97BIAQ", &#10; "CreatedById": "005Qy000005y97BIAQ", &#10; "BillingLongitude": null, &#10; "BillingGeocodeAccuracy": null, &#10; "BillingPostalCode": null, &#10; "CustomerSignedTitle": null, &#10; "ActivatedDate": null, &#10; "Status": "Draft", &#10; "DateCreation__c": "2024-07-17", &#10; "IsDeleted": false, &#10; "SpecialTerms": null, &#10; "LastViewedDate": "2024-07-17T16:48:03.000Z", &#10; "LastApprovedDate": null, &#10; "EndDate": "2024-08-16", &#10; "SystemModstamp": "2024-07-17T16:48:03.000Z", &#10; "BillingCountry": null, &#10; "BillingStreet": null, &#10; "CreatedDate": "2024-07-17T09:54:15.000Z", &#10; "LastActivityDate": null, &#10; "Pricebook2Id": null, &#10; "CompanySignedDate": null, &#10; "OwnerExpirationNotice": null, &#10; "ExternalId__c": "test_Bilous", &#10; "Details__c": "test_details", &#10; "Id": "800Qy00000GS9TqIAL", &#10; "LastModifiedById": "005Qy000005y97BIAQ", &#10; "BillingState": null, &#10; "NameSalesforce__c": "test_name"&#10;}]' encoding="UTF-8" mediaType="application/json" />
			</munit:set-event>
			<flow-ref doc:name="Flow Reference" doc:id="d4a2eacf-1eac-4b20-a49c-58c05c4d2685" name="salesforce-listenerFlow"/>
		</munit:execution>
	</munit:test>

</mule>
